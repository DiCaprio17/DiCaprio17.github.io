---
layout:     post
title:      MyBatis—学习笔记#day02
subtitle:   DIY
date:       2019-07-12
author:     DiCaprio
header-img: img/post-bg-miui-ux.jpg
catalog: true
tags:
    - MyBatis
	- Java
---

<p id="main-toc"><strong>目录</strong></p>


<p id="1%E3%80%81%E5%9B%9E%E9%A1%BEmybatis%E8%87%AA%E5%AE%9A%E4%B9%89%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%2B%E5%AE%8C%E5%96%84%E8%87%AA%E5%AE%9A%E4%B9%89Mybatis%E7%9A%84%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91-toc" style="margin-left:0px;"><a href="#1%E3%80%81%E5%9B%9E%E9%A1%BEmybatis%E8%87%AA%E5%AE%9A%E4%B9%89%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%2B%E5%AE%8C%E5%96%84%E8%87%AA%E5%AE%9A%E4%B9%89Mybatis%E7%9A%84%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91" rel="nofollow" data-token="c41d60643b38198299b0cfc3db177db1" target="_self">1、回顾mybatis自定义和环境搭建+完善自定义Mybatis的注解开发</a></p>
<p id="2%E3%80%81Mybatis%E5%9F%BA%E4%BA%8E%E4%BB%A3%E7%90%86Dao%E7%9A%84CRUD%E6%93%8D%E4%BD%9C%EF%BC%88%E9%87%8D%E7%82%B9%E5%86%85%E5%AE%B9%EF%BC%89-toc" style="margin-left:0px;"><a href="#2%E3%80%81Mybatis%E5%9F%BA%E4%BA%8E%E4%BB%A3%E7%90%86Dao%E7%9A%84CRUD%E6%93%8D%E4%BD%9C%EF%BC%88%E9%87%8D%E7%82%B9%E5%86%85%E5%AE%B9%EF%BC%89" rel="nofollow" data-token="7768bbe1d9c04712191fdea490d68006" target="_self">2、Mybatis基于代理Dao的CRUD操作（重点内容）</a></p>
<p id="2.1%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#2.1%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AE" rel="nofollow" data-token="6fed89d1aeb1d1bbe394818e9638b1db" target="_self">2.1映射配置文件中配置</a></p>
<p id="2.2%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%E7%9A%84%E4%B8%A4%E7%A7%8D%E9%85%8D%E7%BD%AE%C2%A0-toc" style="margin-left:40px;"><a href="#2.2%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%E7%9A%84%E4%B8%A4%E7%A7%8D%E9%85%8D%E7%BD%AE%C2%A0" rel="nofollow" data-token="4b42b20e7bf990f1038883e4bf96103d" target="_self">2.2模糊查询的两种配置&nbsp;</a></p>
<p id="2.3%23%7B%7D%20%E4%B8%8E%24%7B%7D%E7%9A%84%E5%8C%BA%E5%88%AB-toc" style="margin-left:40px;"><a href="#2.3%23%7B%7D%20%E4%B8%8E%24%7B%7D%E7%9A%84%E5%8C%BA%E5%88%AB" rel="nofollow" data-token="a4e8b4462da5d281dbac37e30df6a31d" target="_self">2.3#{} 与${}的区别</a></p>
<p id="%C2%A02.4%E8%8E%B7%E5%8F%96%E8%87%AA%E5%A2%9Eid-toc" style="margin-left:40px;"><a href="#%C2%A02.4%E8%8E%B7%E5%8F%96%E8%87%AA%E5%A2%9Eid" rel="nofollow" data-token="6f9e399c2a18be93f3827166a24e801a" target="_self">&nbsp;2.4获取自增id</a></p>
<p id="2.5Mybatis%20%E4%B8%8E%20JDBC%E7%BC%96%E7%A8%8B%E7%9A%84%E6%AF%94%E8%BE%83-toc" style="margin-left:40px;"><a href="#2.5Mybatis%20%E4%B8%8E%20JDBC%E7%BC%96%E7%A8%8B%E7%9A%84%E6%AF%94%E8%BE%83" rel="nofollow" data-token="14d585b3a2c756de414b91d31f89d86c" target="_self">2.5Mybatis 与 JDBC编程的比较</a></p>
<p id="3%E3%80%81CRUD%E4%B8%AD%E5%8F%AF%E8%83%BD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%9A%E5%8F%82%E6%95%B0%E7%9A%84%E4%BC%A0%E9%80%92%E4%BB%A5%E5%8F%8A%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E5%B0%81%E8%A3%85-toc" style="margin-left:0px;"><a href="#3%E3%80%81CRUD%E4%B8%AD%E5%8F%AF%E8%83%BD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%9A%E5%8F%82%E6%95%B0%E7%9A%84%E4%BC%A0%E9%80%92%E4%BB%A5%E5%8F%8A%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E5%B0%81%E8%A3%85" rel="nofollow" data-token="8a3af054d8b35966452839995f442e05" target="_self">3、CRUD中可能遇到的问题：参数的传递以及返回值的封装</a></p>
<p id="3.1parameterType%20%C2%A0%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0-toc" style="margin-left:40px;"><a href="#3.1parameterType%20%C2%A0%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0" rel="nofollow" data-token="02ceda45076fd90de3bd2de052f0de4e" target="_self">3.1parameterType &nbsp;配置参数</a></p>
<p id="%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E-toc" style="margin-left:80px;"><a href="#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E" rel="nofollow" data-token="dc2553a28cccd6349c3981b912147b3a" target="_self">使用说明</a></p>
<p id="%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-toc" style="margin-left:80px;"><a href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" rel="nofollow" data-token="0ddbcad70cad1123c9ae6dd42e497af8" target="_self">注意事项</a></p>
<p id="OGNL%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%9A-toc" style="margin-left:80px;"><a href="#OGNL%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%9A" rel="nofollow" data-token="316f38ee569e86dddc30700706bbfc8f" target="_self">OGNL表达式：</a></p>
<p id="3.2%20resultType%20%C2%A0%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C%E7%B1%BB%E5%9E%8B-toc" style="margin-left:40px;"><a href="#3.2%20resultType%20%C2%A0%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C%E7%B1%BB%E5%9E%8B" rel="nofollow" data-token="0ad30a1c5795576f296e787d69880e4c" target="_self">3.2 resultType &nbsp;配置结果类型</a></p>
<p id="3.3%20resultMap%E7%BB%93%E6%9E%9C%E7%B1%BB%E5%9E%8B-toc" style="margin-left:40px;"><a href="#3.3%20resultMap%E7%BB%93%E6%9E%9C%E7%B1%BB%E5%9E%8B" rel="nofollow" data-token="2dc5cecf3233fa15290ce9a870e5278e" target="_self">3.3 resultMap结果类型</a></p>
<p id="3.3.1%E5%AE%9A%E4%B9%89-toc" style="margin-left:80px;"><a href="#3.3.1%E5%AE%9A%E4%B9%89" rel="nofollow" data-token="f14e676e780d787642b57b89b895c4fa" target="_self">3.3.1定义</a></p>
<p id="4%E3%80%81%E4%BB%8B%E7%BB%8DMybatis%E5%9F%BA%E4%BA%8E%E4%BC%A0%E7%BB%9Fdao%E6%96%B9%E5%BC%8F%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%88%E8%87%AA%E5%B7%B1%E7%BC%96%E5%86%99dao%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%B1%BB%EF%BC%89%C2%A0%C2%A0%C2%A0%C2%A0%E4%BA%86%E8%A7%A3-toc" style="margin-left:0px;"><a href="#4%E3%80%81%E4%BB%8B%E7%BB%8DMybatis%E5%9F%BA%E4%BA%8E%E4%BC%A0%E7%BB%9Fdao%E6%96%B9%E5%BC%8F%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%88%E8%87%AA%E5%B7%B1%E7%BC%96%E5%86%99dao%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%B1%BB%EF%BC%89%C2%A0%C2%A0%C2%A0%C2%A0%E4%BA%86%E8%A7%A3" rel="nofollow" data-token="8732892e301eef1c695d11e855fe488d" target="_self">4、介绍Mybatis基于传统dao方式的使用（自己编写dao的实现类）&nbsp;&nbsp;&nbsp;&nbsp;了解</a></p>
<p id="4.1%E6%8C%81%E4%B9%85%E5%B1%82%20Dao%20%C2%A0%E5%AE%9E%E7%8E%B0%E7%B1%BB-toc" style="margin-left:40px;"><a href="#4.1%E6%8C%81%E4%B9%85%E5%B1%82%20Dao%20%C2%A0%E5%AE%9E%E7%8E%B0%E7%B1%BB" rel="nofollow" data-token="d0f7ea36585fbecd89405eda89988fa4" target="_self">4.1持久层 Dao &nbsp;实现类</a></p>
<p id="4.2%C2%A0%E6%8C%81%E4%B9%85%E5%B1%82%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#4.2%C2%A0%E6%8C%81%E4%B9%85%E5%B1%82%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE" rel="nofollow" data-token="6135ecb5ad350dab256707a4a94c90bf" target="_self">4.2&nbsp;持久层映射配置</a></p>
<p id="Dao%E5%AE%9E%E7%8E%B0%E7%B1%BB%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90%E2%80%94%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95-toc" style="margin-left:40px;"><a href="#Dao%E5%AE%9E%E7%8E%B0%E7%B1%BB%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90%E2%80%94%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95" rel="nofollow" data-token="d1019c00eec2ebaf4ec158e0a3c34a4a" target="_self">Dao实现类执行过程分析—查询方法</a></p>
<p id="5%E3%80%81%E4%B8%BB%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%20SqlMapConfig.xml-toc" style="margin-left:0px;"><a href="#5%E3%80%81%E4%B8%BB%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%20SqlMapConfig.xml" rel="nofollow" data-token="909822e13885f18579b7306fe6ed3075" target="_self">5、主配置文件 SqlMapConfig.xml</a></p>
<p id="5.1SqlMapConfig.xml%20%C2%A0%E4%B8%AD%E9%85%8D%E7%BD%AE%E7%9A%84%E5%86%85%E5%AE%B9%E5%92%8C%E9%A1%BA%E5%BA%8F-toc" style="margin-left:40px;"><a href="#5.1SqlMapConfig.xml%20%C2%A0%E4%B8%AD%E9%85%8D%E7%BD%AE%E7%9A%84%E5%86%85%E5%AE%B9%E5%92%8C%E9%A1%BA%E5%BA%8F" rel="nofollow" data-token="63c031a284dbba4960229f1b5546b03d" target="_self">5.1SqlMapConfig.xml &nbsp;中配置的内容和顺序</a></p>
<p id="5.2properties-toc" style="margin-left:40px;"><a href="#5.2properties" rel="nofollow" data-token="01cd802e447e7e8758787a2052a0184e" target="_self">5.2properties</a></p>
<p id="%E7%AC%AC%E4%B8%80%E7%A7%8D-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E4%B8%80%E7%A7%8D" rel="nofollow" data-token="b825cbbde4c1191fad376099498bc142" target="_self">第一种</a></p>
<p id="%E7%AC%AC%E4%BA%8C%E7%A7%8D-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D" rel="nofollow" data-token="435a541b47700aa53bef30be160ddfb2" target="_self">第二种</a></p>
<p id="5.3typeAliases%20%EF%BC%88%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D%EF%BC%89-toc" style="margin-left:40px;"><a href="#5.3typeAliases%20%EF%BC%88%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D%EF%BC%89" rel="nofollow" data-token="56b0ef114d465aef8416184566510590" target="_self">5.3typeAliases （类型别名）</a></p>
<p id="%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%AB%E5%90%8D%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%AB%E5%90%8D%EF%BC%9A" rel="nofollow" data-token="cd7a054a396b022e6eef62919cce21d7" target="_self">自定义别名：</a></p>
<p id="5.4mappers%E6%98%A0%E5%B0%84%E5%99%A8-toc" style="margin-left:40px;"><a href="#5.4mappers%E6%98%A0%E5%B0%84%E5%99%A8" rel="nofollow" data-token="1397ff7923a8862855ab027aeaf4d3c7" target="_self">5.4mappers映射器</a></p>
<hr id="hr-toc"><h1 id="1%E3%80%81%E5%9B%9E%E9%A1%BEmybatis%E8%87%AA%E5%AE%9A%E4%B9%89%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%2B%E5%AE%8C%E5%96%84%E8%87%AA%E5%AE%9A%E4%B9%89Mybatis%E7%9A%84%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91" style="margin-left:0cm;"><a name="t0"></a>1、回顾mybatis自定义和环境搭建+完善自定义Mybatis的注解开发</h1>

<p><strong>自定义mybatis开发流程图</strong></p>
<p><img alt="" class="has" src="https://img-blog.csdnimg.cn/20190710202749873.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70"></p>
<p style="margin-left:0cm;">MyBatis—学习笔记#day01源码：<a href="https://github.com/DiCaprio17/MyBatis" rel="nofollow" data-token="177e5e51119317a538e4b55e313c0cdf">https://github.com/DiCaprio17/MyBatis</a></p>
<h1 id="2%E3%80%81Mybatis%E5%9F%BA%E4%BA%8E%E4%BB%A3%E7%90%86Dao%E7%9A%84CRUD%E6%93%8D%E4%BD%9C%EF%BC%88%E9%87%8D%E7%82%B9%E5%86%85%E5%AE%B9%EF%BC%89" style="margin-left:0cm;"><a name="t1"></a>2、Mybatis基于代理Dao的CRUD操作（重点内容）</h1>
<h2 id="2.1%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AE"><a name="t2"></a>2.1映射配置文件中配置</h2>
<blockquote>
<p><strong>细节：</strong><br><strong>resultType属性</strong>：用于指定结果集的类型。代表参数的类型，因为我们要传入的是一个类的对象，所以类型就写类的全名称。<br><strong>parameterType属性</strong>：用于指定传入参数的类型。<br><strong>sql语句中使用#{} 字符</strong>：它代表占位符，相当于原来 jdbc 部分所学的，都是用于执行语句时替换实际的数据。具体的数据是由#{}里面的内容决定的。<br><strong>#{} 中内容的写法</strong>：数据类型是基本类型，若只有一个时，此处可以随意写，否则填对象的属性名称，它用的是 ognl 表达式。</p>

<p>#{user.username}它会先去找 user 对象，然后在 user 对象中找到 username 属性，并调用<br>
getUsername()方法把值取出来。但是我们在 parameterType 属性上指定了实体类名称，所以可以省略 user.<br>
而直接写 username。</p>
</blockquote>

<h2 id="2.2%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%E7%9A%84%E4%B8%A4%E7%A7%8D%E9%85%8D%E7%BD%AE%C2%A0"><a name="t3"></a>2.2模糊查询的两种配置&nbsp;</h2>
<p><img alt="" class="has" height="17" src="https://img-blog.csdnimg.cn/2019071122360615.png" width="450"></p>
<p>我们在配置文件中没有加入%来作为模糊查询的条件，所以在传入字符串实参时，就需要给定模糊查询的标<br>
识%。配置文件中的#{username}也只是一个占位符，所以 SQL 语句显示为“？”</p>

<p><img alt="" class="has" height="92" src="https://img-blog.csdnimg.cn/20190711223512398.png" width="757"></p>
<p><img alt="" class="has" height="15" src="https://img-blog.csdnimg.cn/20190711223623124.png" width="460"></p>
<p><img alt="" class="has" height="94" src="https://img-blog.csdnimg.cn/2019071122365968.png" width="756"></p>
<p>可以发现，我们在程序代码中就不需要加入模糊查询的匹配符%了，这两种方式的实现效果是一样的，但执行<br>
的语句是不一样的</p>

<h2 id="2.3%23%7B%7D%20%E4%B8%8E%24%7B%7D%E7%9A%84%E5%8C%BA%E5%88%AB"><a name="t4"></a>2.3#{} 与${}的区别</h2>
<blockquote>
<p><strong>#{} 表示一个占位符号</strong><br>
通过#{}可以实现 preparedStatement 向占位符中设置值，<u>自动进行 java 类型和 jdbc 类型转换</u>，<span style="color:#f33b45;">#{}可以有效防止 sql 注入</span>。 #{}可以接收简单类型值或 pojo 属性值。 如果 parameterType 传输单个简单类型值，#{}括号中可以是 value 或其它名称。<br><strong>${} 表示拼接sql串</strong><br>
通过${}可以将 parameterType 传入的内容<u>拼接在 sql中且不进行 jdbc 类型转换</u>， ${}可以接收简单类型值或 pojo 属性值，如果 parameterType 传输单个简单类型值，${}括号中只能是 value。</p>
</blockquote>

<h2 id="%C2%A02.4%E8%8E%B7%E5%8F%96%E8%87%AA%E5%A2%9Eid"><a name="t5"></a>&nbsp;2.4获取自增id</h2>
<pre class="has" name="code"><code class="hljs xml"><ol class="hljs-ln" style="width:959px"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">&lt;!-- 保存用户 --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"saveUser"</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">"user"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">&lt;!-- 配置插入操作后，获取插入数据的id --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">&lt;!-- keyProperty：属性id，keyColumn：数据库id，resultType：数据类型，order：(保存)前做后做？ --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-tag">&lt;<span class="hljs-name">selectKey</span> <span class="hljs-attr">keyProperty</span>=<span class="hljs-string">"userId"</span> <span class="hljs-attr">keyColumn</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"int"</span> <span class="hljs-attr">order</span>=<span class="hljs-string">"AFTER"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">            select last_insert_id();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-tag">&lt;/<span class="hljs-name">selectKey</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        insert into user(username,address,sex,birthday)values(#{username},#{address},#{sex},#{birthday});</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p><img alt="" class="has" height="271" src="https://img-blog.csdnimg.cn/20190711225259624.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="365"></p>
<h2 id="2.5Mybatis%20%E4%B8%8E%20JDBC%E7%BC%96%E7%A8%8B%E7%9A%84%E6%AF%94%E8%BE%83"><a name="t6"></a>2.5Mybatis 与 JDBC编程的比较</h2>
<blockquote>
<p>1.数据库链接创建、释放频繁造成系统资源浪费从而影响系统性能，如果使用数据库链接池可解决此问题。<br>
解决：在 SqlMapConfig.xml 中配置数据链接池，使用连接池管理数据库链接。</p>

<p><br>
2.Sql 语句写在代码中造成代码不易维护，实际应用 sql 变化的可能较大，sql 变动需要改变 java 代码。<br>
解决：将 Sql 语句配置在 XXXXmapper.xml 文件中与 java 代码分离。</p>

<p><br>
3.向sql语句传参数麻烦，因为sql语句的where 条件不一定，可能多也可能少，占位符需要和参数对应。<br>
解决：Mybatis自动将 java 对象映射至 sql 语句，通过 statement 中的 parameterType 定义输入参数的类型。</p>

<p><br>
4.对结果集解析麻烦，sql 变化导致解析代码变化，且解析前需要遍历，如果能将数据库记录封装成 pojo 对<br>
象解析比较方便。<br>
解决：Mybatis自动将 sql执行结果映射至 java 对象，通过 statement 中的 resultType 定义输出结果的类型。</p>
</blockquote>

<h1 id="3%E3%80%81CRUD%E4%B8%AD%E5%8F%AF%E8%83%BD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%9A%E5%8F%82%E6%95%B0%E7%9A%84%E4%BC%A0%E9%80%92%E4%BB%A5%E5%8F%8A%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E5%B0%81%E8%A3%85" style="margin-left:0cm;"><a name="t7"></a>3、CRUD中可能遇到的问题：参数的传递以及返回值的封装</h1>
<h2 id="3.1parameterType%20%C2%A0%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0"><a name="t8"></a>3.1parameterType &nbsp;配置参数</h2>
<h3 id="%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"><a name="t9"></a>使用说明</h3>
<blockquote>
<p>该属性的取值可以<br>
是基本类型，引用类型（例如:String 类型），还可以是实体类类型（POJO 类）。同时也可以使用实体类的包装<br>
类</p>
</blockquote>

<h3 id="%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><a name="t10"></a>注意事项</h3>
<blockquote>
<p>基本类型和 String 我 们可以直接写类型名称 ，也可以使用包名<strong>.</strong>类名的方式，例如 ：java.lang.String。<br>
实体类类型，目前我们只能使用全限定类名。</p>

<p>究其原因，是 mybaits 在加载时已经把常用的数据类型注册了别名，从而我们在使用时可以不写包名，而我们的是实体类并没有注册别名，所以必须写全限定类名。</p>
</blockquote>

<h3 id="OGNL%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%9A" style="margin-left:0cm;"><a name="t11"></a>OGNL表达式：</h3>
<blockquote>
<p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Object Graphic Navigation Language</p>

<p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 对象&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 图&nbsp;&nbsp;&nbsp; 导航&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; 语言</p>
<p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 它是通过对象的取值方法来获取数据。在写法上把get给省略了。</p>
<p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 比如：我们获取用户的名称</p>
<p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 类中的写法：user.getUsername();</p>
<p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OGNL表达式写法：user.username</p>
<p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mybatis中为什么能直接写username,而不用user.呢：</p>
<p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 因为在parameterType中已经提供了属性所属的类，所以此时不需要写对象名</p>
</blockquote>

<h2 id="3.2%20resultType%20%C2%A0%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C%E7%B1%BB%E5%9E%8B"><a name="t12"></a>3.2 resultType &nbsp;配置结果类型</h2>
<blockquote>
<p>resultType 属性可以指定结果集的类型，它支持基本类型和实体类类型。<br>
我们在前面的 CRUD 案例中已经对此属性进行过应用了。<br>
需要注意的是，它和 parameterType 一样，如果注册过类型别名的，可以直接使用别名。没有注册过的必须使用全限定类名。例如：我们的实体类此时必须是全限定类名（今天最后一个章节会讲解如何配置实体类的别名）<br>
同时，当是实体类名称是，还有一个要求，<span style="color:#f33b45;">实体类中的属性名称必须和查询语句中的列名保持一致，否则无法实现封装。</span></p>
</blockquote>

<p>但在Windows下的MySQL数据字段名不区分大小写，所以username和userName相同，因此可以封装，其他则不行</p>
<p><img alt="" class="has" height="149" src="https://img-blog.csdnimg.cn/20190711231841871.png" width="755"></p>
<p>解决方法一：给属性起别名</p>
<p><img alt="" class="has" height="41" src="https://img-blog.csdnimg.cn/20190711231934921.png" width="613"></p>
<p>但当属性很多时，起别名则显得麻烦，因此</p>
<p>解决方法二：3.3 resultMap结果类型，配置 查询结果的列名和实体类的属性名的对应关系</p>
<h2 id="3.3%20resultMap%E7%BB%93%E6%9E%9C%E7%B1%BB%E5%9E%8B"><a name="t13"></a>3.3 resultMap结果类型</h2>
<blockquote>
<p>resultMap 标签可以建立查询的列名和实体类的属性名称不一致时建立对应关系。从而实现封装。<br>
在 select 标签中使用 resultMap 属性指定引用即可。同时 resultMap 可以实现将查询结果映射为复杂类型的 pojo，比如在查询结果映射对象中包括 pojo 和 list 实现一对一查询和一对多查询。</p>
</blockquote>

<h3 id="3.3.1%E5%AE%9A%E4%B9%89"><a name="t14"></a>3.3.1定义</h3>
<blockquote>
<p>type 属性：指定实体类的全限定类名<br>
id 属性：给定一个唯一标识，是给查询 select 标签引用用的</p>

<p>id 标签：用于指定主键字段<br>
result 标签：用于指定非主键字段<br>
column 属性：用于指定数据库列名<br>
property 属性：用于指定实体类属性名称</p>
</blockquote>

<pre class="has" name="code"><code class="hljs xml"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"com.mybatis.domain.User"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userMap"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"userId"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"userName"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"sex"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"userSex"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"address"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"userAddress"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"birthday"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"userBirthday"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p>&nbsp;</p>
<h1 id="4%E3%80%81%E4%BB%8B%E7%BB%8DMybatis%E5%9F%BA%E4%BA%8E%E4%BC%A0%E7%BB%9Fdao%E6%96%B9%E5%BC%8F%E7%9A%84%E4%BD%BF%E7%94%A8%EF%BC%88%E8%87%AA%E5%B7%B1%E7%BC%96%E5%86%99dao%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%B1%BB%EF%BC%89%C2%A0%C2%A0%C2%A0%C2%A0%E4%BA%86%E8%A7%A3" style="margin-left:0cm;"><a name="t15"></a>4、介绍Mybatis基于传统dao方式的使用（自己编写dao的实现类）&nbsp;&nbsp;&nbsp;&nbsp;了解</h1>
<h2 id="4.1%E6%8C%81%E4%B9%85%E5%B1%82%20Dao%20%C2%A0%E5%AE%9E%E7%8E%B0%E7%B1%BB"><a name="t16"></a>4.1持久层 Dao &nbsp;实现类</h2>
<pre class="has" name="code"><code class="hljs java"><ol class="hljs-ln" style="width:975px"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">package</span> com.mybatis.dao.impl;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">import</span> com.itheima.dao.IUserDao;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">import</span> com.itheima.domain.User;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">import</span> java.util.List;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IUserDao</span> </span>{</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="12"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">private</span> SqlSessionFactory factory;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="13"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="14"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserDaoImpl</span><span class="hljs-params">(SqlSessionFactory factory)</span></span>{</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="15"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">this</span>.factory = factory;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="16"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    }</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="17"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="18"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-meta">@Override</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="19"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">findAll</span><span class="hljs-params">()</span> </span>{</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="20"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//1.根据factory获取SqlSession对象</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="21"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        SqlSession session = factory.openSession();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="22"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//2.调用SqlSession中的方法，实现查询列表</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="23"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        List&lt;User&gt; users = session.selectList(<span class="hljs-string">"com.itheima.dao.IUserDao.findAll"</span>);<span class="hljs-comment">//参数就是能获取配置信息的key</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="24"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//3.释放资源</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="25"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        session.close();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="26"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">return</span> users;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="27"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    }</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="28"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="29"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-meta">@Override</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="30"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">saveUser</span><span class="hljs-params">(User user)</span> </span>{</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="31"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//1.根据factory获取SqlSession对象</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="32"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        SqlSession session = factory.openSession();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="33"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//2.调用方法实现保存</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="34"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        session.insert(<span class="hljs-string">"com.itheima.dao.IUserDao.saveUser"</span>,user);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="35"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//3.提交事务</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="36"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        session.commit();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="37"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//4.释放资源</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="38"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        session.close();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="39"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    }</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="40"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="41"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-meta">@Override</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="42"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">updateUser</span><span class="hljs-params">(User user)</span> </span>{</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="43"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//1.根据factory获取SqlSession对象</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="44"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        SqlSession session = factory.openSession();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="45"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//2.调用方法实现更新</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="46"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        session.update(<span class="hljs-string">"com.itheima.dao.IUserDao.updateUser"</span>,user);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="47"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//3.提交事务</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="48"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        session.commit();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="49"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//4.释放资源</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="50"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        session.close();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="51"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    }</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="52"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="53"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-meta">@Override</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="54"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(Integer userId)</span> </span>{</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="55"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//1.根据factory获取SqlSession对象</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="56"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        SqlSession session = factory.openSession();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="57"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//2.调用方法实现更新</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="58"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        session.update(<span class="hljs-string">"com.itheima.dao.IUserDao.deleteUser"</span>,userId);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="59"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//3.提交事务</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="60"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        session.commit();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="61"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//4.释放资源</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="62"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        session.close();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="63"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    }</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="64"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="65"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-meta">@Override</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="66"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">findById</span><span class="hljs-params">(Integer userId)</span> </span>{</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="67"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//1.根据factory获取SqlSession对象</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="68"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        SqlSession session = factory.openSession();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="69"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//2.调用SqlSession中的方法，实现查询一个</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="70"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        User user = session.selectOne(<span class="hljs-string">"com.itheima.dao.IUserDao.findById"</span>,userId);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="71"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//3.释放资源</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="72"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        session.close();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="73"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">return</span> user;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="74"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    }</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="75"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="76"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-meta">@Override</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="77"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">findByName</span><span class="hljs-params">(String username)</span> </span>{</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="78"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//1.根据factory获取SqlSession对象</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="79"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        SqlSession session = factory.openSession();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="80"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//2.调用SqlSession中的方法，实现查询列表</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="81"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        List&lt;User&gt; users = session.selectList(<span class="hljs-string">"com.itheima.dao.IUserDao.findByName"</span>,username);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="82"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//3.释放资源</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="83"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        session.close();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="84"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">return</span> users;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="85"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    }</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="86"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="87"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-meta">@Override</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="88"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">findTotal</span><span class="hljs-params">()</span> </span>{</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="89"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//1.根据factory获取SqlSession对象</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="90"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        SqlSession session = factory.openSession();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="91"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//2.调用SqlSession中的方法，实现查询一个</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="92"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        Integer count = session.selectOne(<span class="hljs-string">"com.itheima.dao.IUserDao.findTotal"</span>);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="93"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">//3.释放资源</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="94"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        session.close();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="95"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">return</span> count;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="96"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    }</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="97"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">}</div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<h2 id="4.2%C2%A0%E6%8C%81%E4%B9%85%E5%B1%82%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE"><a name="t17"></a>4.2&nbsp;持久层映射配置</h2>
<pre class="has" name="code"><code class="hljs xml"><ol class="hljs-ln" style="width:1001px"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span><span class="hljs-meta">?&gt;</span></span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE mapper</span></span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta">        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta">        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"com.mybatis.dao.IUserDao"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-comment">&lt;!-- 查询所有 --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"findAll"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"com.mybatis.domain.User"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        select * from user;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="12"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-comment">&lt;!-- 保存用户 --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="13"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"saveUser"</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">"com.mybatis.domain.User"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="14"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">&lt;!-- 配置插入操作后，获取插入数据的id --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="15"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-tag">&lt;<span class="hljs-name">selectKey</span> <span class="hljs-attr">keyProperty</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">keyColumn</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"int"</span> <span class="hljs-attr">order</span>=<span class="hljs-string">"AFTER"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="16"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">            select last_insert_id();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="17"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-tag">&lt;/<span class="hljs-name">selectKey</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="18"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        insert into user(username,address,sex,birthday)values(#{username},#{address},#{sex},#{birthday});</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="19"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="20"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="21"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-comment">&lt;!-- 更新用户 --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="22"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"updateUser"</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">"com.mybatis.domain.User"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="23"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        update user set username=#{username},address=#{address},sex=#{sex},birthday=#{birthday} where id=#{id}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="24"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="25"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="26"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-comment">&lt;!-- 删除用户--&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="27"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"deleteUser"</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">"java.lang.Integer"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="28"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        delete from user where id = #{uid}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="29"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="30"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="31"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-comment">&lt;!-- 根据id查询用户 --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="32"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"findById"</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">"INT"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"com.mybatis.domain.User"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="33"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        select * from user where id = #{uid}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="34"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="35"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="36"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-comment">&lt;!-- 根据名称模糊查询 --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="37"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"findByName"</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">"string"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"com.mybatis.domain.User"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="38"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">          select * from user where username like #{name}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="39"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">   <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="40"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="41"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-comment">&lt;!-- 获取用户的总记录条数 --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="42"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"findTotal"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"int"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="43"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        select count(id) from user;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="44"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="45"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<h2 id="Dao%E5%AE%9E%E7%8E%B0%E7%B1%BB%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90%E2%80%94%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95"><a name="t18"></a>Dao实现类执行过程分析—查询方法</h2>
<p><img alt="" class="has" src="https://img-blog.csdnimg.cn/20190712151610304.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70"></p>
<h1 id="5%E3%80%81%E4%B8%BB%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%20SqlMapConfig.xml" style="margin-left:0cm;"><a name="t19"></a>5、主配置文件 SqlMapConfig.xml</h1>
<h2 id="5.1SqlMapConfig.xml%20%C2%A0%E4%B8%AD%E9%85%8D%E7%BD%AE%E7%9A%84%E5%86%85%E5%AE%B9%E5%92%8C%E9%A1%BA%E5%BA%8F"><a name="t20"></a>5.1SqlMapConfig.xml &nbsp;中配置的内容和顺序</h2>
<blockquote>
<p>-properties （属性）<br>
&nbsp; &nbsp; --property<br>
-settings（全局配置参数）<br>
&nbsp; &nbsp;--setting<br>
-typeAliases （类型别名）<br>
&nbsp; &nbsp;--typeAliase<br>
&nbsp; &nbsp;--package<br>
-typeHandlers（类型处理器）<br>
-objectFactory（对象工厂）<br>
-plugins（插件）<br>
-environments（环境集合属性对象）<br>
&nbsp; &nbsp;--environment（环境子属性对象）<br>
&nbsp; &nbsp;&nbsp; &nbsp;---transactionManager（事务管理）<br>
&nbsp; &nbsp;&nbsp; &nbsp;---dataSource（数据源）<br>
-mappers （映射器）<br>
&nbsp; &nbsp;--mapper<br>
&nbsp; &nbsp;--package</p>
</blockquote>

<h2 id="5.2properties" style="margin-left:0cm;"><a name="t21"></a>5.2properties</h2>
<h3 id="%E7%AC%AC%E4%B8%80%E7%A7%8D" style="margin-left:0cm;"><a name="t22"></a>第一种</h3>
<pre class="has" name="code"><code class="hljs xml"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"jdbc.driver"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"com.mysql.jdbc.Driver"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"jdbc.url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"jdbc:mysql://localhost:3306/eesy"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"jdbc.username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"root"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"jdbc.password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1234"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p id="%E2%80%8B" style="margin-left:0cm;"><img alt="" class="has" height="417" src="https://img-blog.csdnimg.cn/20190715144008908.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="773"></p>
<h3 id="%E7%AC%AC%E4%BA%8C%E7%A7%8D" style="margin-left:0cm;"><a name="t23"></a>第二种</h3>
<p><strong>在 classpath &nbsp;下定义 db.properties &nbsp;文件</strong></p>
<p><img alt="" class="has" height="118" src="https://img-blog.csdnimg.cn/20190715144153181.png" width="216"></p>
<pre class="has" name="code"><code class="hljs java"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">jdbc.driver=com.mysql.jdbc.Driver</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">jdbc.url=jdbc:mysql:<span class="hljs-comment">//localhost:3306/eesy</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">jdbc.username=root</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">jdbc.password=<span class="hljs-number">1234</span></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p style="margin-left:0cm;"><strong>properties 配置</strong></p>
<pre class="has" name="code"><code class="hljs xml"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- 配置连接数据库的信息</span></span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">    resource 属性：用于指定 properties 配置文件的位置，要求配置文件必须在类路径下</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">    resource="jdbcConfig.properties"</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">    url 属性：</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">    URL： Uniform Resource Locator 统一资源定位符</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">    http://localhost:8080/mystroe/CategoryServlet URL</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">    协议 主机 端口  URI</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">    URI：Uniform Resource Identifier 统一资源标识符</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">    /mystroe/CategoryServlet</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">    它是可以在 web 应用中唯一定位一个资源的路径</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">--&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="12"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>  <span class="hljs-attr">url</span>=<span class="hljs-string">file:///D:/IdeaProjects/mybatisCRUD/src/main/resources/jdbcConfig.properties</span>"&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="13"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p style="margin-left:0cm;">或者<img alt="" class="has" height="21" src="https://img-blog.csdnimg.cn/2019071514443431.png" width="412"></p>
<p style="margin-left:0cm;"><strong>dataSource引用配置</strong></p>
<pre class="has" name="code"><code class="hljs xml"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"POOLED"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"driver"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.driver}"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.url}"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.username}"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.password}"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<h2 id="5.3typeAliases%20%EF%BC%88%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D%EF%BC%89" style="margin-left:0cm;"><a name="t24"></a>5.3typeAliases （类型别名）</h2>
<h3 id="%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%AB%E5%90%8D%EF%BC%9A"><a name="t25"></a>自定义别名：</h3>
<pre class="has" name="code"><code class="hljs xml"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">在 SqlMapConfig.xml 中配置：</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-comment">&lt;!-- 单个别名定义 --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">typeAlias</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"com.mybatis.domain.User"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-comment">&lt;!-- 批量别名定义，扫描整个包下的类，别名为类名（首字母大写或小写都可以） --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"com.mybatis.domain"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">" 其它包 "</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p>typeAlias用于配置别名，type指定实体类全限定类名，alias指定别名，<span style="color:#f33b45;">当指定了别名就不再区分其大小写&nbsp;</span></p>
<p><img alt="" class="has" height="137" src="https://img-blog.csdnimg.cn/2019071517125520.png" width="914"></p>
<p><img alt="" class="has" height="19" src="https://img-blog.csdnimg.cn/2019071517094186.png" width="328">&nbsp;&nbsp;<img alt="" class="has" height="16" src="https://img-blog.csdnimg.cn/20190715170952623.png" width="409"></p>
<h2 id="5.4mappers%E6%98%A0%E5%B0%84%E5%99%A8"><a name="t26"></a>5.4mappers映射器</h2>
<p><img alt="" class="has" height="93" src="https://img-blog.csdnimg.cn/20190715171144302.png" width="880"></p>
<h3 id="%3Cmapper%20resource%3D%22%20%22%20%2F%3E"><a name="t27"></a>&lt;mapper resource=" " /&gt;</h3>
<blockquote>
<p>使用相对于类路径的资源<br>
如：&lt;mapper resource="com/itheima/dao/IUserDao.xml" /&gt;</p>
</blockquote>

<h3 id="%3Cmapper%20class%3D%22%20%22%20%2F%3E"><a name="t28"></a>&lt;mapper class=" " /&gt;</h3>
<blockquote>
<p>使用 mapper 接口类路径<br>
如：&lt;mapper class="com.mybatis.dao.UserDao"/&gt;<br>
注意：此种方法要求 mapper &nbsp;接口名称和 mapper&nbsp;映射文件名称相同，且放在同一个目录中</p>
</blockquote>

<h3 id="%3Cpackage%20name%3D%22%22%2F%3E"><a name="t29"></a>&lt;package name=""/&gt;</h3>
<blockquote>
<p>注册指定包下的所有 mapper 接口<br>
如：&lt;package name="cn.itcast.mybatis.mapper"/&gt;<br>
注意：此种方法要求 &nbsp;mapper &nbsp;接口名称和 mapper &nbsp;映射文件名称相同，且放在同一个目录中</p>
</blockquote>

<p>源码：<a href="https://github.com/DiCaprio17/MyBatis/tree/master/mybatis_day02" rel="nofollow" data-token="f530c22903e5f5c426a82087f5488ef8">https://github.com/DiCaprio17/MyBatis/tree/master/mybatis_day02</a>&nbsp;</p>