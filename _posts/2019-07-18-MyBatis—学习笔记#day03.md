---
layout:     post
title:      MyBatis—学习笔记#day03
subtitle:   MyBatis
date:       2019-07-18
author:     DiCaprio
header-img: img/home-bg-art.jpg
catalog: true
tags:
    - MyBatis
    - Java
---


<p id="main-toc"><strong>目录</strong></p>

<p id="main-toc-toc" style="margin-left:0px;"><a href="#main-toc" rel="nofollow" data-token="b8ecf307c5cb00add9cc7d01560a367d" target="_self">1.mybatis中的连接池以及事务控制&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 原理部分了解，应用部分会用</a></p>
<p id="1.1mybatis%E4%B8%AD%E8%BF%9E%E6%8E%A5%E6%B1%A0%E4%BD%BF%E7%94%A8%E5%8F%8A%E5%88%86%E6%9E%90-toc" style="margin-left:40px;"><a href="#1.1mybatis%E4%B8%AD%E8%BF%9E%E6%8E%A5%E6%B1%A0%E4%BD%BF%E7%94%A8%E5%8F%8A%E5%88%86%E6%9E%90" rel="nofollow" data-token="b1c8e28c9f4fa6f1f81dbbffaf518394" target="_self">1.1mybatis中连接池使用及分析</a></p>
<p id="1.1.1%20Mybatis%20%C2%A0%E8%BF%9E%E6%8E%A5%E6%B1%A0%E7%9A%84%E5%88%86%E7%B1%BB-toc" style="margin-left:80px;"><a href="#1.1.1%20Mybatis%20%C2%A0%E8%BF%9E%E6%8E%A5%E6%B1%A0%E7%9A%84%E5%88%86%E7%B1%BB" rel="nofollow" data-token="c131b1efd2be5d748a86d28404511bb0" target="_self">1.1.1 Mybatis &nbsp;连接池的分类</a></p>
<p id="1.1.2%20Mybatis%20%C2%A0%E4%B8%AD%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84%E9%85%8D%E7%BD%AE-toc" style="margin-left:80px;"><a href="#1.1.2%20Mybatis%20%C2%A0%E4%B8%AD%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84%E9%85%8D%E7%BD%AE" rel="nofollow" data-token="2f09671af747248d7ac3c66be479a866" target="_self">1.1.2 Mybatis &nbsp;中数据源的配置</a></p>
<p id="1.1.3%20Mybatis%20%C2%A0%E4%B8%AD%20DataSource%20%C2%A0%E7%9A%84%E5%AD%98%E5%8F%96-toc" style="margin-left:80px;"><a href="#1.1.3%20Mybatis%20%C2%A0%E4%B8%AD%20DataSource%20%C2%A0%E7%9A%84%E5%AD%98%E5%8F%96" rel="nofollow" data-token="67c6024ea8f99871e61324d9355bd932" target="_self">1.1.3 Mybatis &nbsp;中 DataSource &nbsp;的存取</a></p>
<p id="1.1.4%20Mybatis%20%C2%A0%E4%B8%AD%E8%BF%9E%E6%8E%A5%E7%9A%84%E8%8E%B7%E5%8F%96%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90-toc" style="margin-left:80px;"><a href="#1.1.4%20Mybatis%20%C2%A0%E4%B8%AD%E8%BF%9E%E6%8E%A5%E7%9A%84%E8%8E%B7%E5%8F%96%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90" rel="nofollow" data-token="1d3ba0774cee40f33ced90210932c001" target="_self">1.1.4 Mybatis &nbsp;中连接的获取过程分析</a></p>
<p id="1.2%20mybatis%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E7%9A%84%E5%88%86%E6%9E%90-toc" style="margin-left:40px;"><a href="#1.2%20mybatis%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E7%9A%84%E5%88%86%E6%9E%90" rel="nofollow" data-token="490c08f0d24b9864644bd869dfd628a3" target="_self">1.2 mybatis事务控制的分析</a></p>
<p id="1.2.1%20%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1%E8%AE%BE%E7%BD%AE-toc" style="margin-left:80px;"><a href="#1.2.1%20%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1%E8%AE%BE%E7%BD%AE" rel="nofollow" data-token="7fcd906e9788d9e38505dd88e2e910f5" target="_self">1.2.1 自动提交事务设置</a></p>
<p id="2.mybatis%E5%9F%BA%E4%BA%8EXML%E9%85%8D%E7%BD%AE%E7%9A%84%E5%8A%A8%E6%80%81SQL%E8%AF%AD%E5%8F%A5%E4%BD%BF%E7%94%A8%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%E4%BC%9A%E7%94%A8%E5%8D%B3%E5%8F%AF-toc" style="margin-left:0px;"><a href="#2.mybatis%E5%9F%BA%E4%BA%8EXML%E9%85%8D%E7%BD%AE%E7%9A%84%E5%8A%A8%E6%80%81SQL%E8%AF%AD%E5%8F%A5%E4%BD%BF%E7%94%A8%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%E4%BC%9A%E7%94%A8%E5%8D%B3%E5%8F%AF" rel="nofollow" data-token="b430f2f84629904dec444b222f5cc962" target="_self">2.mybatis基于XML配置的动态SQL语句使用&nbsp; &nbsp; &nbsp; &nbsp;会用即可</a></p>
<p id="%3Cif%3E-toc" style="margin-left:40px;"><a href="#%3Cif%3E" rel="nofollow" data-token="f2e676d384ba02a7f60b1749cebe8e16" target="_self">2.1 if标签</a></p>
<p id="%3Cwhere%3E-toc" style="margin-left:40px;"><a href="#%3Cwhere%3E" rel="nofollow" data-token="b00add2abc99aae16b1c6d6d17c6dfaa" target="_self">2.2 where标签</a></p>
<p id="%3Cforeach%3E-toc" style="margin-left:40px;"><a href="#%3Cforeach%3E" rel="nofollow" data-token="e4bb2219b1b47802b90e3d0f4b8c1552" target="_self">2.3 foreach标签</a></p>
<p id="3%E3%80%81mybatis%E4%B8%AD%E7%9A%84%E5%A4%9A%E8%A1%A8%E6%93%8D%E4%BD%9C%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%E6%8E%8C%E6%8F%A1%E5%BA%94%E7%94%A8-toc" style="margin-left:0px;"><a href="#3%E3%80%81mybatis%E4%B8%AD%E7%9A%84%E5%A4%9A%E8%A1%A8%E6%93%8D%E4%BD%9C%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%E6%8E%8C%E6%8F%A1%E5%BA%94%E7%94%A8" rel="nofollow" data-token="8da320f9a3fa0bc8d220d02ee48c7af9" target="_self">3、mybatis中的多表操作&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 掌握应用</a></p>
<p id="%E4%B8%80%E5%AF%B9%E4%B8%80%E6%9F%A5%E8%AF%A2-toc" style="margin-left:40px;"><a href="#%E4%B8%80%E5%AF%B9%E4%B8%80%E6%9F%A5%E8%AF%A2" rel="nofollow" data-token="f0162babb7c7a715f0075bc1d8186bf2" target="_self">一对一查询</a></p>
<p id="%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2-toc" style="margin-left:40px;"><a href="#%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2" rel="nofollow" data-token="e0376dea8579932065b4ca020cbed738" target="_self">一对多查询</a></p>
<p id="%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2-toc" style="margin-left:40px;"><a href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2" rel="nofollow" data-token="6759d8e4becad224f641566695e7bb3b" target="_self">多对多查询</a></p>
<p id="%E6%89%A9%E5%B1%95-toc" style="margin-left:0px;"><a href="#%E6%89%A9%E5%B1%95" rel="nofollow" data-token="851f672bdb179a93102f9b2061d36195" target="_self">扩展</a></p>
<p id="JNDI%E6%95%B0%E6%8D%AE%E6%BA%90-toc" style="margin-left:40px;"><a href="#JNDI%E6%95%B0%E6%8D%AE%E6%BA%90" rel="nofollow" data-token="0a48d8879c3c6f4f971b19058058ed36" target="_self">JNDI数据源</a></p>
<hr id="hr-toc"><h1><a name="t0"></a>1.mybatis中的连接池以及事务控制&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 原理部分了解，应用部分会用</h1>

<h2 id="1.1mybatis%E4%B8%AD%E8%BF%9E%E6%8E%A5%E6%B1%A0%E4%BD%BF%E7%94%A8%E5%8F%8A%E5%88%86%E6%9E%90" style="margin-left:0cm;"><a name="t1"></a>1.1mybatis中连接池使用及分析</h2>
<p>在 Mybatis 的 SqlMapConfig.xml 配置文件中，通过&lt;dataSource type=”pooled”&gt;来实现 Mybatis 中连接池的配置。</p>
<p><img alt="" class="has" src="https://img-blog.csdnimg.cn/20190716103244263.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70"></p>
<h3 id="1.1.1%20Mybatis%20%C2%A0%E8%BF%9E%E6%8E%A5%E6%B1%A0%E7%9A%84%E5%88%86%E7%B1%BB"><a name="t2"></a>1.1.1 Mybatis &nbsp;连接池的分类</h3>
<p>在 Mybatis 中我们将它的数据源 dataSource 分为以下几类：</p>
<blockquote>
<p><img alt="" class="has" height="90" src="https://img-blog.csdnimg.cn/20190715230158558.png" width="311"><br>
可以看出 Mybatis 将它自己的数据源分为三类：<br>
UNPOOLED 不使用连接池的数据源<br>
POOLED 使用连接池的数据源<br>
JNDI 使用 JNDI 实现的数据源</p>
</blockquote>

<p><img alt="" class="has" src="https://img-blog.csdnimg.cn/20190716103330813.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70"></p>
<p>在这三种数据源中，我们一般采用的是 POOLED 数据源（很多时候我们所说的数据源就是为了更好的管理数据库连接，也就是我们所说的连接池技术）。</p>
<h3 id="1.1.2%20Mybatis%20%C2%A0%E4%B8%AD%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84%E9%85%8D%E7%BD%AE"><a name="t3"></a>1.1.2 Mybatis &nbsp;中数据源的配置</h3>
<p>我们的数据源配置就是在 SqlMapConfig.xml 文件中，具体配置如下：</p>
<pre class="has" name="code"><code class="hljs xml"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">&lt;!-- 配置数据源（连接池）信息 --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"POOLED"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"driver"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.driver}"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.url}"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.username}"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.password}"</span>/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<blockquote>
<p>MyBatis 在初始化时，根据&lt;dataSource&gt;的 type 属性来创建相应类型的的数据源 DataSource，即：<br>
type=”POOLED”：MyBatis 会创建 PooledDataSource 实例<br>
type=”UNPOOLED” ： MyBatis 会创建 UnpooledDataSource 实例<br>
type=”JNDI”：MyBatis 会从 JNDI 服务上查找 DataSource 实例，然后返回使用</p>
</blockquote>

<h3 id="1.1.3%20Mybatis%20%C2%A0%E4%B8%AD%20DataSource%20%C2%A0%E7%9A%84%E5%AD%98%E5%8F%96"><a name="t4"></a>1.1.3 Mybatis &nbsp;中 DataSource &nbsp;的存取</h3>
<p>MyBatis 是通过工厂模式来创建数据源 DataSource 对象的， &nbsp;MyBatis 定义了抽象的工厂接口:org.apache.ibatis.datasource.DataSourceFactory,通过其 getDataSource()方法返回数据源DataSource。</p>
<p>下面是 DataSourceFactory 源码，具体如下：</p>
<pre class="has" name="code"><code class="hljs java"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">package</span> org.apache.ibatis.datasource;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">import</span> java.util.Properties;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">import</span> javax.sql.DataSource;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment"><span class="hljs-comment">/**</span></span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">* <span class="hljs-doctag">@author</span> Clinton Begin</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">*/</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">DataSourceFactory</span> </span>{</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setProperties</span><span class="hljs-params">(Properties props)</span></span>;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function">DataSource <span class="hljs-title">getDataSource</span><span class="hljs-params">()</span></span>;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">}</div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p>&nbsp;MyBatis 创建了 DataSource 实例后，会将其放到 Configuration 对象内的 Environment 对象中， 供以后使用。</p>
<h3 id="1.1.4%20Mybatis%20%C2%A0%E4%B8%AD%E8%BF%9E%E6%8E%A5%E7%9A%84%E8%8E%B7%E5%8F%96%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90"><a name="t5"></a>1.1.4 Mybatis &nbsp;中连接的获取过程分析</h3>
<p><img alt="" class="has" src="https://img-blog.csdnimg.cn/20190716103511473.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70"></p>
<p><img alt="" class="has" src="https://img-blog.csdnimg.cn/20190716103654601.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70"></p>
<h2 id="1.2%20mybatis%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E7%9A%84%E5%88%86%E6%9E%90" style="margin-left:0cm;"><a name="t6"></a>1.2 mybatis事务控制的分析</h2>
<h3 id="1.2.1%20%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1%E8%AE%BE%E7%BD%AE"><a name="t7"></a>1.2.1 自动提交事务设置</h3>
<p><img alt="" class="has" height="448" src="https://img-blog.csdnimg.cn/20190716105031490.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="679"></p>
<p>此时事务就设置为自动提交了，同样可以实现CUD操作时记录的保存。虽然这也是一种方式，但就编程而言，设置为自动提交方式为 false再根据情况决定是否进行提交，这种方式更常用。因为我们可以根据业务情况来决定提交是否进行提交。</p>
<h1 id="2.mybatis%E5%9F%BA%E4%BA%8EXML%E9%85%8D%E7%BD%AE%E7%9A%84%E5%8A%A8%E6%80%81SQL%E8%AF%AD%E5%8F%A5%E4%BD%BF%E7%94%A8%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%E4%BC%9A%E7%94%A8%E5%8D%B3%E5%8F%AF" style="margin-left:0cm;"><a name="t8"></a>2.mybatis基于XML配置的动态SQL语句使用&nbsp; &nbsp; &nbsp; &nbsp;会用即可</h1>
<p style="margin-left:0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mappers配置文件中的几个标签：</p>
<h2 id="%3Cif%3E" style="margin-left:0cm;"><a name="t9"></a>2.1 if标签</h2>
<p><strong>配置</strong></p>
<p><img alt="" class="has" height="217" src="https://img-blog.csdnimg.cn/20190716114403254.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="667"></p>
<p>注意：&lt;if&gt;标签的 test 属性中写的是对象的属性名，如果是包装类的对象要使用 OGNL 表达式的写法。另外要注意 where 1=1 的作用~！</p>
<blockquote>
<p>where 1=1 的作用：</p>

<p>在不定数量查询条件情况下，1=1可以很方便的规范语句</p>
<p>此时即使if标签都不成立，都会有一条正确的语句 <strong><span style="color:#f33b45;">select * from user where 1=1</span></strong></p>
</blockquote>

<p><strong>测试</strong></p>
<p><img alt="" class="has" height="282" src="https://img-blog.csdnimg.cn/20190716114616163.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="521"></p>
<h2 id="%3Cwhere%3E" style="margin-left:0cm;"><a name="t10"></a>2.2 where标签</h2>
<p>为了简化上面 where 1=1 的条件拼装，我们可以采用&lt;where&gt;标签来简化开发。</p>
<p><strong>配置</strong></p>
<p><img alt="" class="has" height="236" src="https://img-blog.csdnimg.cn/20190716115540731.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="676"></p>
<h2 id="%3Cforeach%3E" style="margin-left:0cm;"><a name="t11"></a>2.3 foreach标签</h2>
<p><strong>需求</strong></p>
<blockquote>
<p>传入多个 id 查询用户信息，用下边两个 sql 实现：<br>
SELECT * FROM USERS WHERE username LIKE '%张%' AND (id =10 OR id =89 OR id=16)<br>
SELECT * FROM USERS WHERE username LIKE '%张%' AND id IN (10,89,16)<br>
这样我们在进行范围查询时，就要将一个集合中的值，作为参数动态添加进来。<br>
这样我们将如何进行参数的传递？</p>
</blockquote>

<p style="margin-left:0cm;"><strong>在 QueryVo &nbsp;中加入一个 List &nbsp;集合用于封装参数</strong></p>
<p style="margin-left:0cm;"><img alt="" class="has" height="372" src="https://img-blog.csdnimg.cn/20190716120117168.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="570"></p>
<p style="margin-left:0cm;"><strong>持久层 Dao &nbsp;接口</strong></p>
<p style="margin-left:0cm;"><img alt="" class="has" height="140" src="https://img-blog.csdnimg.cn/20190716120222516.png" width="371"></p>
<p style="margin-left:0cm;"><strong>配置</strong></p>
<p style="margin-left:0cm;"><img alt="" class="has" height="235" src="https://img-blog.csdnimg.cn/2019071811171735.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="837"><img alt="" class="has" height="85" src="https://img-blog.csdnimg.cn/20190718111729473.png" width="312"></p>
<p style="margin-left:0cm;"><strong><span style="color:#f33b45;">#{}里的内容有item所决定</span></strong></p>
<blockquote>
<p style="text-indent:0;">SQL 语句：<br>
select 字段 from user where id in (?)<br>
&lt;foreach&gt;标签用于遍历集合，它的属性：<br>
collection:代表要遍历的集合元素，注意编写时不要写#{}<br>
open:代表语句的开始部分<br>
close:代表结束部<br>
item:括号里的内容，id<br>
separator:以逗号为分隔符</p>
</blockquote>

<p style="margin-left:0cm;"><strong>测试</strong></p>
<p style="margin-left:0cm;"><img alt="" class="has" height="365" src="https://img-blog.csdnimg.cn/20190718111134584.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="471"></p>
<h1 id="3%E3%80%81mybatis%E4%B8%AD%E7%9A%84%E5%A4%9A%E8%A1%A8%E6%93%8D%E4%BD%9C%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%20%E6%8E%8C%E6%8F%A1%E5%BA%94%E7%94%A8" style="margin-left:0cm;"><a name="t12"></a>3、mybatis中的多表操作&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 掌握应用</h1>
<blockquote>
<p>示例：用户和账户<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;一个用户可以有多个账户<strong>（一对多）</strong><br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;一个账户只能属于一个用户（多个账户也可以属于同一个用户）<strong>（一对一）</strong><br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;步骤：<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;1、建立两张表：用户表，账户表<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;让用户表和账户表之间具备一对多的关系：需要使用外键在账户表中添加<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;2、建立两个实体类：用户实体类和账户实体类<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;让用户和账户的实体类能体现出来一对多的关系<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;3、建立两个配置文件<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;用户的配置文件<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;账户的配置文件<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;4、实现配置：<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;当我们查询用户时，可以同时得到用户下所包含的账户信息<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;当我们查询账户时，可以同时得到账户的所属用户信息</p>
</blockquote>

<h2 id="%E4%B8%80%E5%AF%B9%E4%B8%80%E6%9F%A5%E8%AF%A2"><a name="t13"></a>一对一查询</h2>
<p>当我们查询账户时，可以同时得到账户的所属用户信息</p>
<p><strong>建立对应关系</strong></p>
<p><img alt="" class="has" height="315" src="https://img-blog.csdnimg.cn/20190718115125127.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="585"><img alt="" class="has" height="94" src="https://img-blog.csdnimg.cn/20190718115145691.png" width="764"></p>
<p><strong>实现类</strong></p>
<p><img alt="" class="has" height="224" src="https://img-blog.csdnimg.cn/20190718115229753.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="484"></p>
<h2 id="%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2" style="margin-left:0cm;"><a name="t14"></a>一对多查询</h2>
<p>当我们查询用户时，可以同时得到用户下所包含的账户信息</p>
<p><strong>建立对应关系</strong></p>
<p><img alt="" class="has" height="303" src="https://img-blog.csdnimg.cn/20190718115931215.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="546"><img alt="" class="has" height="89" src="https://img-blog.csdnimg.cn/20190718115953382.png" width="604"></p>
<p><strong>实现类</strong></p>
<p><img alt="" class="has" height="315" src="https://img-blog.csdnimg.cn/20190718115415437.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="750"></p>
<blockquote>
<p>示例：用户和角色<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;一个用户可以有多个角色<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;一个角色可以赋予多个用户<strong>（多对多）</strong><br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;步骤：<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;1、建立两张表：用户表，角色表<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;让用户表和角色表具有多对多的关系。需要使用中间表，中间表中包含各自的主键，在中间表中是外键。<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;2、建立两个实体类：用户实体类和角色实体类<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;让用户和角色的实体类能体现出来多对多的关系<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;各自包含对方一个集合引用<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;3、建立两个配置文件<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;用户的配置文件<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;角色的配置文件<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;4、实现配置：<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;当我们查询用户时，可以同时得到用户所包含的角色信息<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;当我们查询角色时，可以同时得到角色的所赋予的用户信息</p>
</blockquote>

<h2 id="%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2"><a name="t15"></a>多对多查询</h2>
<p><strong>实现类</strong></p>
<p><img alt="" class="has" height="398" src="https://img-blog.csdnimg.cn/20190718121101245.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="412">&nbsp;<img alt="" class="has" height="355" src="https://img-blog.csdnimg.cn/2019071812111621.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="406"></p>
<p><strong>建立对应关系</strong></p>
<p><img alt="" class="has" height="438" src="https://img-blog.csdnimg.cn/20190718121212915.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="589"></p>
<p>当我们查询角色时，可以同时得到角色的所赋予的用户信息</p>
<p><img alt="" class="has" height="459" src="https://img-blog.csdnimg.cn/20190718121229557.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="600"></p>
<p>当我们查询用户时，可以同时得到用户所包含的角色信息</p>
<p><strong>测试</strong></p>
<p><img alt="" class="has" height="265" src="https://img-blog.csdnimg.cn/20190718121517600.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="506"><img alt="" class="has" height="198" src="https://img-blog.csdnimg.cn/20190718121532797.png" width="474"></p>
<h1 id="%E6%89%A9%E5%B1%95"><a name="t16"></a>扩展</h1>
<h2 id="JNDI%E6%95%B0%E6%8D%AE%E6%BA%90"><a name="t17"></a>JNDI数据源</h2>
<p style="margin-left:0cm;">JNDI：Java Naming and Directory Interface。是SUN公司推出的一套规范，属于JavaEE技术之一。目的是模仿windows系统中的注册表。</p>
<p style="margin-left:0cm;"><img alt="" class="has" src="https://img-blog.csdnimg.cn/20190718131259240.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70"></p>
<p style="margin-left:0cm;">1.创建Maven的war工程并导入坐标&nbsp;</p>
<p style="margin-left:0cm;"><img alt="" class="has" height="28" src="https://img-blog.csdnimg.cn/2019071813134242.png" width="378"></p>
<pre class="has" name="code"><code class="hljs xml"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="12"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="13"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="14"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="15"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="16"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="17"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="18"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="19"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="20"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="21"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="22"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="23"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="24"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="25"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="26"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="27"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="28"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="29"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="30"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="31"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="32"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="33"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="34"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jsp-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="35"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="36"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="37"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p>2.在webapp文件下创建META-INF目录，在META-INF目录中建立一个名为context.xml的配置文件</p>
<p><img alt="" class="has" height="370" src="https://img-blog.csdnimg.cn/20190718130958652.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="327"></p>
<pre class="has" name="code"><code class="hljs xml"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span><span class="hljs-meta">?&gt;</span></span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">Context</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- </span></span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">&lt;Resource </span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">name="jdbc/mybatis"                  数据源的名称</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">type="javax.sql.DataSource"                   数据源类型</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">auth="Container"                        数据源提供者，这里指tomcat</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">maxActive="20"                         最大活动数</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">maxWait="10000"                            最大等待时间</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">maxIdle="5"                               最大空闲数</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">username="root"                            用户名</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="12"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">password="123456"                            密码</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="13"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">driverClassName="com.mysql.jdbc.Driver"          驱动类</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="14"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">url="jdbc:mysql://localhost:3306/mybatis" 连接url字符串</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="15"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">/&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="16"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment"> --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="17"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">Resource</span> </span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="18"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-attr">name</span>=<span class="hljs-string">"jdbc/mybatis"</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="19"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-attr">type</span>=<span class="hljs-string">"javax.sql.DataSource"</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="20"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-attr">auth</span>=<span class="hljs-string">"Container"</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="21"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-attr">maxActive</span>=<span class="hljs-string">"20"</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="22"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-attr">maxWait</span>=<span class="hljs-string">"10000"</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="23"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-attr">maxIdle</span>=<span class="hljs-string">"5"</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="24"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-attr">username</span>=<span class="hljs-string">"root"</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="25"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-attr">password</span>=<span class="hljs-string">"123456"</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="26"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-attr">driverClassName</span>=<span class="hljs-string">"com.mysql.jdbc.Driver"</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="27"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-attr">url</span>=<span class="hljs-string">"jdbc:mysql://localhost:3306/mybatis"</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="28"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">/&gt;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="29"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">Context</span>&gt;</span></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre>
<p>&nbsp;</p>
<p>3.修改SqlMapConfig.xml中的配置</p>
<p><img alt="" class="has" height="488" src="https://img-blog.csdnimg.cn/2019071813194492.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2OTEwNjM0,size_16,color_FFFFFF,t_70" width="755"></p>
<p>源码：<a href="https://github.com/DiCaprio17/MyBatis/tree/master/mybatis_day03" rel="nofollow" data-token="625562e1ad37442b0e58ea32605db380">https://github.com/DiCaprio17/MyBatis/tree/master/mybatis_day03</a></p>
